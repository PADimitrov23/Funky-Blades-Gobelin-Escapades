[gd_scene load_steps=12 format=3 uid="uid://bg8hil3lj2w2e"]

[ext_resource type="Script" uid="uid://d35xf42qc3vpk" path="res://scripts/player.gd" id="1_eqqp1"]
[ext_resource type="PackedScene" uid="uid://dhhpda127is2p" path="res://models/Sword.glb" id="2_ykyjo"]
[ext_resource type="Texture2D" uid="uid://s7pk44jmiv6p" path="res://sprites/knight-health-bar-under.png" id="3_nmc1l"]
[ext_resource type="Texture2D" uid="uid://h2mufjr5p0ld" path="res://sprites/knight-health-bar-over.png" id="4_f46kd"]

[sub_resource type="CapsuleMesh" id="CapsuleMesh_bxedw"]
radius = 0.4
height = 1.8

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_eqqp1"]
radius = 0.4
height = 1.8

[sub_resource type="Animation" id="Animation_uxov2"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("FirstPerson/SwordPoint:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(-0.0619083, -0.473393, 0.0143169)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("FirstPerson/SwordPoint:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_ykyjo"]
resource_name = "SwordSwing"
length = 0.6
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("FirstPerson/SwordPoint:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.262524, 0.6),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(-0.0619083, -0.473393, 0.0143169), Vector3(-0.163853, -0.018356, -0.218849), Vector3(-0.0619083, -0.473393, 0.0143169)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("FirstPerson/SwordPoint:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.262524, 0.6),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(-0.71212, -0.318209, 0.293714), Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_nmc1l"]
resource_name = "SwordInspect"
length = 3.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("FirstPerson/SwordPoint:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.0333333, 0.0666667, 0.1, 0.133333, 0.166667, 0.2, 0.233333, 0.266667, 0.3, 0.333333, 0.366667, 0.4, 0.433333, 0.466667, 0.5, 0.533333, 0.566667, 0.6, 0.633333, 0.666667, 0.7, 0.733333, 0.766667, 0.8, 0.833333, 0.866667, 0.9, 0.933333, 0.966667, 1, 1.03333, 1.06667, 1.1, 1.13333, 1.16667, 1.2, 1.23333, 1.26667, 1.3, 1.33333, 1.36667, 1.4, 1.43333, 1.46667, 1.5, 1.53333, 1.56667, 1.6, 1.63333, 1.66667, 1.7, 1.73333, 1.76667, 1.8, 1.83333, 1.86667, 1.9, 1.93333, 1.96667, 2, 2.03333, 2.06667, 2.1, 2.13333, 2.16667, 2.2, 2.23333, 2.26667, 2.3, 2.33333, 2.36667, 2.4, 2.43333, 2.46667, 2.5, 2.53333, 2.56667, 2.6, 2.63333, 2.66667, 2.7, 2.73333, 2.76667, 2.8, 2.83333, 2.86667, 2.9, 2.93333, 2.96667, 3),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(-0.0619083, -0.473393, 0.0143169), Vector3(-0.0859861, -0.436006, -0.00354413), Vector3(-0.110064, -0.398618, -0.0214052), Vector3(-0.134142, -0.361231, -0.0392662), Vector3(-0.15822, -0.323844, -0.0571272), Vector3(-0.182297, -0.286457, -0.0749882), Vector3(-0.206375, -0.249069, -0.0928493), Vector3(-0.230453, -0.211682, -0.11071), Vector3(-0.254531, -0.174295, -0.128571), Vector3(-0.278609, -0.136907, -0.146432), Vector3(-0.302686, -0.09952, -0.164293), Vector3(-0.326764, -0.0621327, -0.182154), Vector3(-0.350842, -0.0247454, -0.200015), Vector3(-0.37492, 0.0126418, -0.217876), Vector3(-0.398998, 0.0500291, -0.235737), Vector3(-0.423075, 0.0874164, -0.253598), Vector3(-0.447153, 0.124804, -0.27146), Vector3(-0.471231, 0.162191, -0.289321), Vector3(-0.495309, 0.199578, -0.307182), Vector3(-0.519387, 0.236966, -0.325043), Vector3(-0.543465, 0.274353, -0.342904), Vector3(-0.567542, 0.31174, -0.360765), Vector3(-0.59162, 0.349128, -0.378626), Vector3(-0.586784, 0.341617, -0.375388), Vector3(-0.581947, 0.334107, -0.37215), Vector3(-0.57711, 0.326597, -0.368912), Vector3(-0.572274, 0.319087, -0.365674), Vector3(-0.567437, 0.311577, -0.362436), Vector3(-0.5626, 0.304066, -0.359198), Vector3(-0.557764, 0.296556, -0.35596), Vector3(-0.552927, 0.289046, -0.352722), Vector3(-0.54809, 0.281536, -0.349484), Vector3(-0.543254, 0.274026, -0.346246), Vector3(-0.538417, 0.266515, -0.343008), Vector3(-0.53358, 0.259005, -0.33977), Vector3(-0.528744, 0.251495, -0.336532), Vector3(-0.523907, 0.243985, -0.333294), Vector3(-0.519071, 0.236475, -0.330056), Vector3(-0.514234, 0.228965, -0.326818), Vector3(-0.509397, 0.221454, -0.32358), Vector3(-0.504561, 0.213944, -0.320342), Vector3(-0.499724, 0.206434, -0.317104), Vector3(-0.494887, 0.198924, -0.313866), Vector3(-0.490051, 0.191414, -0.310628), Vector3(-0.474179, 0.182333, -0.306428), Vector3(-0.444526, 0.171291, -0.301027), Vector3(-0.414872, 0.160249, -0.295626), Vector3(-0.385218, 0.149207, -0.290225), Vector3(-0.355565, 0.138165, -0.284824), Vector3(-0.325911, 0.127124, -0.279423), Vector3(-0.296257, 0.116082, -0.274022), Vector3(-0.266604, 0.10504, -0.268621), Vector3(-0.23695, 0.0939979, -0.26322), Vector3(-0.207297, 0.082956, -0.257819), Vector3(-0.177643, 0.0719141, -0.252417), Vector3(-0.147989, 0.0608722, -0.247016), Vector3(-0.118336, 0.0498303, -0.241615), Vector3(-0.0886819, 0.0387884, -0.236214), Vector3(-0.0590283, 0.0277465, -0.230813), Vector3(-0.0293747, 0.0167046, -0.225412), Vector3(0.000279009, 0.00566274, -0.220011), Vector3(0.0299327, -0.00537917, -0.21461), Vector3(0.0595863, -0.016421, -0.209209), Vector3(0.08924, -0.0274629, -0.203808), Vector3(0.118894, -0.0385048, -0.198407), Vector3(0.148547, -0.0495467, -0.193006), Vector3(0.178201, -0.0605886, -0.187604), Vector3(0.207855, -0.0716305, -0.182203), Vector3(0.237508, -0.0826724, -0.176802), Vector3(0.267162, -0.0937143, -0.171401), Vector3(0.251492, -0.111794, -0.162557), Vector3(0.235822, -0.129874, -0.153714), Vector3(0.220152, -0.147954, -0.14487), Vector3(0.204482, -0.166034, -0.136026), Vector3(0.188812, -0.184114, -0.127183), Vector3(0.173142, -0.202194, -0.118339), Vector3(0.157472, -0.220274, -0.109495), Vector3(0.141802, -0.238354, -0.100651), Vector3(0.126132, -0.256434, -0.0918077), Vector3(0.110462, -0.274514, -0.082964), Vector3(0.0947917, -0.292594, -0.0741203), Vector3(0.0791217, -0.310674, -0.0652765), Vector3(0.0634517, -0.328754, -0.0564328), Vector3(0.0477817, -0.346833, -0.0475891), Vector3(0.0321117, -0.364913, -0.0387454), Vector3(0.0164417, -0.382993, -0.0299017), Vector3(0.000771701, -0.401073, -0.021058), Vector3(-0.0148983, -0.419153, -0.0122143), Vector3(-0.0305683, -0.437233, -0.00337052), Vector3(-0.0462383, -0.455313, 0.00547318), Vector3(-0.0619083, -0.473393, 0.0143169)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("FirstPerson/SwordPoint:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0333333, 0.0666667, 0.1, 0.133333, 0.166667, 0.2, 0.233333, 0.266667, 0.3, 0.333333, 0.366667, 0.4, 0.433333, 0.466667, 0.5, 0.533333, 0.566667, 0.6, 0.633333, 0.666667, 0.7, 0.733333, 0.766667, 0.8, 0.833333, 0.866667, 0.9, 0.933333, 0.966667, 1, 1.03333, 1.06667, 1.1, 1.13333, 1.16667, 1.2, 1.23333, 1.26667, 1.3, 1.33333, 1.36667, 1.4, 1.43333, 1.46667, 1.5, 1.53333, 1.56667, 1.6, 1.63333, 1.66667, 1.7, 1.73333, 1.76667, 1.8, 1.83333, 1.86667, 1.9, 1.93333, 1.96667, 2, 2.03333, 2.06667, 2.1, 2.13333, 2.16667, 2.2, 2.23333, 2.26667, 2.3, 2.33333, 2.36667, 2.4, 2.43333, 2.46667, 2.5, 2.53333, 2.56667, 2.6, 2.63333, 2.66667, 2.7, 2.73333, 2.76667, 2.8, 2.83333, 2.86667, 2.9, 2.93333, 2.96667, 3),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(-0.0159543, -0.0300986, -0.0615232), Vector3(-0.0319086, -0.0601972, -0.123046), Vector3(-0.0478629, -0.0902958, -0.18457), Vector3(-0.0638173, -0.120394, -0.246093), Vector3(-0.0797716, -0.150493, -0.307616), Vector3(-0.0957259, -0.180592, -0.369139), Vector3(-0.11168, -0.21069, -0.430662), Vector3(-0.127635, -0.240789, -0.492185), Vector3(-0.143589, -0.270887, -0.553709), Vector3(-0.159543, -0.300986, -0.615232), Vector3(-0.175497, -0.331084, -0.676755), Vector3(-0.191452, -0.361183, -0.738278), Vector3(-0.207406, -0.391282, -0.799801), Vector3(-0.22336, -0.42138, -0.861324), Vector3(-0.239315, -0.451479, -0.922848), Vector3(-0.255269, -0.481577, -0.984371), Vector3(-0.271223, -0.511676, -1.04589), Vector3(-0.287178, -0.541775, -1.10742), Vector3(-0.303132, -0.571873, -1.16894), Vector3(-0.319086, -0.601972, -1.23046), Vector3(-0.335041, -0.63207, -1.29199), Vector3(-0.350995, -0.662169, -1.35351), Vector3(-0.33857, -0.658839, -1.32638), Vector3(-0.326146, -0.655509, -1.29926), Vector3(-0.313721, -0.652179, -1.27213), Vector3(-0.301297, -0.648849, -1.24501), Vector3(-0.288872, -0.645519, -1.21788), Vector3(-0.276447, -0.642189, -1.19076), Vector3(-0.264023, -0.638859, -1.16363), Vector3(-0.251598, -0.63553, -1.13651), Vector3(-0.239174, -0.6322, -1.10938), Vector3(-0.226749, -0.62887, -1.08226), Vector3(-0.214324, -0.62554, -1.05513), Vector3(-0.2019, -0.62221, -1.02801), Vector3(-0.189475, -0.61888, -1.00088), Vector3(-0.177051, -0.61555, -0.973758), Vector3(-0.164626, -0.61222, -0.946633), Vector3(-0.152202, -0.60889, -0.919508), Vector3(-0.139777, -0.60556, -0.892382), Vector3(-0.127352, -0.60223, -0.865257), Vector3(-0.114928, -0.5989, -0.838132), Vector3(-0.102503, -0.59557, -0.811007), Vector3(-0.0900786, -0.592241, -0.783882), Vector3(-0.0825604, -0.566806, -0.763104), Vector3(-0.0811701, -0.513762, -0.750254), Vector3(-0.0797799, -0.460718, -0.737404), Vector3(-0.0783896, -0.407674, -0.724554), Vector3(-0.0769994, -0.354631, -0.711704), Vector3(-0.0756091, -0.301587, -0.698854), Vector3(-0.0742189, -0.248543, -0.686004), Vector3(-0.0728286, -0.195499, -0.673154), Vector3(-0.0714384, -0.142455, -0.660304), Vector3(-0.0700481, -0.0894114, -0.647453), Vector3(-0.0686579, -0.0363677, -0.634603), Vector3(-0.0672676, 0.0166762, -0.621753), Vector3(-0.0658774, 0.06972, -0.608903), Vector3(-0.0644871, 0.122764, -0.596053), Vector3(-0.0630969, 0.175808, -0.583203), Vector3(-0.0617066, 0.228851, -0.570353), Vector3(-0.0603164, 0.281895, -0.557503), Vector3(-0.0589261, 0.334939, -0.544653), Vector3(-0.0575359, 0.387983, -0.531803), Vector3(-0.0561456, 0.441027, -0.518953), Vector3(-0.0547554, 0.49407, -0.506103), Vector3(-0.0533651, 0.547114, -0.493253), Vector3(-0.0519749, 0.600158, -0.480403), Vector3(-0.0505846, 0.653202, -0.467553), Vector3(-0.0491944, 0.706246, -0.454703), Vector3(-0.0478041, 0.759289, -0.441853), Vector3(-0.0455277, 0.723133, -0.420812), Vector3(-0.0432514, 0.686976, -0.399771), Vector3(-0.040975, 0.65082, -0.378731), Vector3(-0.0386986, 0.614663, -0.35769), Vector3(-0.0364222, 0.578506, -0.33665), Vector3(-0.0341458, 0.54235, -0.315609), Vector3(-0.0318694, 0.506193, -0.294568), Vector3(-0.029593, 0.470036, -0.273528), Vector3(-0.0273166, 0.43388, -0.252487), Vector3(-0.0250403, 0.397723, -0.231447), Vector3(-0.0227639, 0.361566, -0.210406), Vector3(-0.0204875, 0.32541, -0.189365), Vector3(-0.0182111, 0.289253, -0.168325), Vector3(-0.0159347, 0.253096, -0.147284), Vector3(-0.0136583, 0.21694, -0.126244), Vector3(-0.0113819, 0.180783, -0.105203), Vector3(-0.00910555, 0.144627, -0.0841624), Vector3(-0.00682916, 0.10847, -0.0631218), Vector3(-0.00455277, 0.0723133, -0.0420812), Vector3(-0.00227639, 0.0361567, -0.0210406), Vector3(0, 0, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_nmc1l"]
_data = {
&"RESET": SubResource("Animation_uxov2"),
&"SwordInspect": SubResource("Animation_nmc1l"),
&"SwordSwing": SubResource("Animation_ykyjo")
}

[sub_resource type="Theme" id="Theme_3rerk"]

[node name="Player" type="CharacterBody3D"]
script = ExtResource("1_eqqp1")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
mesh = SubResource("CapsuleMesh_bxedw")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_eqqp1")
debug_color = Color(0.907197, 0.000122252, 0.74084, 0.42)

[node name="FirstPerson" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0619083, 0.473393, -0.0143169)

[node name="SwordPoint" type="Node3D" parent="FirstPerson"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0619083, -0.473393, 0.0143169)

[node name="Sword" parent="FirstPerson/SwordPoint" instance=ExtResource("2_ykyjo")]
transform = Transform3D(-0.404265, 0.0163931, -0.914495, -0.586497, -0.771871, 0.245433, -0.701849, 0.635569, 0.321655, 0.43784, 0.321814, -0.842742)

[node name="Head" type="Node3D" parent="."]

[node name="ThirdPerson" type="Camera3D" parent="Head"]
transform = Transform3D(1, 0, 0, 0, 0.914084, 0.405524, 0, -0.405524, 0.914084, -0.0148078, 1.74403, 1.60263)

[node name="SwordAnimations" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_nmc1l")
}

[node name="AttackCooldown" type="Timer" parent="."]
wait_time = 0.06
one_shot = true

[node name="InspectCooldown" type="Timer" parent="."]
one_shot = true

[node name="HUD" type="CanvasLayer" parent="."]

[node name="HealthBar" type="TextureProgressBar" parent="HUD"]
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -123.0
offset_top = -185.0
offset_right = 48.0
offset_bottom = 100.0
grow_horizontal = 0
grow_vertical = 0
scale = Vector2(0.715208, 0.651762)
value = 22.0
rounded = true
fill_mode = 3
texture_under = ExtResource("3_nmc1l")
texture_progress = ExtResource("4_f46kd")
tint_progress = Color(1, 0, 0, 1)

[node name="GoldCounter" type="Label" parent="HUD"]
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 34.0
offset_top = -55.0
offset_right = 56.0
offset_bottom = -1.0
grow_vertical = 0
theme = SubResource("Theme_3rerk")
theme_override_font_sizes/font_size = 36
text = "0"

[connection signal="timeout" from="AttackCooldown" to="." method="_on_attack_cooldown_timeout"]
[connection signal="timeout" from="InspectCooldown" to="." method="_on_inspect_cooldown_timeout"]
